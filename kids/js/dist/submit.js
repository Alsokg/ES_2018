var customKidsAdditionalDiscount=10,customKidsCount=0,Product=function(t){var o,c,n,e,i,a,s,u={count:0,price:399,oldPrice:499,classToUpdate:"",id:0,signal:".notify-cart",totalPrice:0,totalOldPrice:0},r=this,d=0,l=0,p=0,f=0;this.construct=function(t){$.extend(u,t),d=$("."+u.classToUpdate+" .inc"+u.id),l=$("."+u.classToUpdate+" .dec"+u.id),p=$("."+u.classToUpdate+" .total"+u.id+" .price-i"),f=$("."+u.classToUpdate+" #total"+u.id),c=$("."+u.classToUpdate+" .qty"+u.id),o=$("."+u.classToUpdate+" .qty1"+u.id),e=$(".pseudo-form ."+u.classToUpdate).fadeOut(200),s=$("."+u.classToUpdate+" .clear-offset"),i=$("."+u.classToUpdate+" .summury .old"),a=$("."+u.classToUpdate+" .summury").css("display","none"),f.empty().val(0),n=$("."+u.classToUpdate+" .counts"),d.on("click",function(){r.add()}),l.on("click",function(){r.dec()}),s.on("click",function(){r.clearCount()})},this.add=function(){u.count++,u.totalPrice=u.count*u.price,u.totalOldPrice=u.count*u.oldPrice,1==u.id&&customKidsCount++,r.update()},this.dec=function(){u.count>0&&(u.count--,u.totalPrice=u.count*u.price,u.totalOldPrice=u.count*u.oldPrice,1==u.id&&customKidsCount--,r.update())},this.getCount=function(){return u.count},this.getPrice=function(){return u.price},this.getTotal=function(){return u.count*u.price},this.getTotaOld=function(){return u.count*u.oldPrice},this.clearCount=function(){u.count=0,u.totalPrice=u.count*u.price,u.totalOldPrice=u.count*u.oldPrice,r.update()},this.update=function(){p.empty().text(u.totalPrice),f.val(u.totalPrice),o.val(u.count),c.val(u.count),n.length&&(u.count>0?(n.removeClass("transparent").find(".pr-count").empty().text(u.count),n.parent().addClass("green-border")):(n.addClass("transparent").find(".pr-count").empty(),n.parent().removeClass("green-border"))),u.count>0?e.fadeIn(200):e.fadeOut(200),u.oldPrice*u.count>0?(i.empty().text(u.oldPrice*u.count),a.css("display","inline")):(i.empty(),a.css("display","none")),$(u.signal).trigger("click")},this.construct(t)},Cart=function(t){var o={discount:0,productsForDiscount:0},c=0,n=0,e=0,i=[],a=0,s=0,u=$(".screen-cart"),r=$(".total-price .total"),d=$(".total-price .old"),l=$("#total-form"),p=this;this.construct=function(t){$.extend(o,t),$(".notify-cart").on("click",function(){p.updateCartTotal()})},this.updateCartTotal=function(){for(var t=0,p=0,f=0,m=i[0].getTotal(),y=0;y<a;y++)t+=i[y].getTotal(),p+=i[y].getCount(),f+=i[y].getTotaOld();if((c=p)>=o.productsForDiscount)s=c*o.discount,customKidsCount>0&&(s+=customKidsAdditionalDiscount*customKidsCount);else if(e>0)for(y=0;y<i.length;y++){var g=i[y].getPrice/100;s+=Math.ceil(g)}else s=0;n=t-s,0!=f?f+=+m:f=t,c>0?(u.fadeIn(200),r.empty().text(n),d.empty().text(f),l.val(n),$(".cart-action").addClass("flexbox").find(".cart-num").empty().text(c),$("#ttl").val(n)):(u.fadeOut(200),r.empty().text(n),d.empty().text(f),$(".cart-action").removeClass("flexbox")),f<=n?d.parent().css("display","none"):d.parent().css("display","inline")},this.setPromo=function(t){e=t},this.addProduct=function(t){i[a]=t,a+=1},this.getTotal=function(){return n},this.clearAll=function(){for(var t=0;t<a;t++)i[t].getCount()>0&&i[t].clearCount()},this.construct(t)};$(document).ready(function(){$("#close-good-modal, .to-main").on("click",function(t){return t.preventDefault(),$("#good-modal").animate({opacity:0},250),setTimeout(function(){$("#good-modal").css("display","none")},250),!1})});