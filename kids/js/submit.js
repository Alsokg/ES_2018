var Product=function(t){var o,c,e,n,a,i,r,s={count:0,price:399,oldPrice:499,classToUpdate:"",id:0,signal:".notify-cart",totalPrice:0,totalOldPrice:0},l=this,d=0,u=0,p=0,f=0;this.construct=function(t){$.extend(s,t),d=$("."+s.classToUpdate+" .inc"+s.id),u=$("."+s.classToUpdate+" .dec"+s.id),p=$("."+s.classToUpdate+" .total"+s.id+" .price-i"),f=$("."+s.classToUpdate+" #total"+s.id),c=$("."+s.classToUpdate+" .qty"+s.id),o=$("."+s.classToUpdate+" .qty1"+s.id),n=$(".pseudo-form ."+s.classToUpdate).fadeOut(200),r=$("."+s.classToUpdate+" .clear-offset"),a=$("."+s.classToUpdate+" .summury .old"),i=$("."+s.classToUpdate+" .summury").css("display","none"),f.empty().val(0),e=$("."+s.classToUpdate+" .counts"),d.on("click",function(){l.add()}),u.on("click",function(){l.dec()}),r.on("click",function(){l.clearCount()})},this.add=function(){s.count++,s.totalPrice=s.count*s.price,s.totalOldPrice=s.count*s.oldPrice,l.update()},this.dec=function(){s.count>0&&(s.count--,s.totalPrice=s.count*s.price,s.totalOldPrice=s.count*s.oldPrice,l.update())},this.getCount=function(){return s.count},this.getTotal=function(){return s.count*s.price},this.getTotaOld=function(){return s.count*s.oldPrice},this.clearCount=function(){s.count=0,s.totalPrice=s.count*s.price,s.totalOldPrice=s.count*s.oldPrice,l.update()},this.update=function(){p.empty().text(s.totalPrice),f.val(s.totalPrice),o.val(s.count),c.val(s.count),e.length&&(s.count>0?(e.removeClass("transparent").find(".pr-count").empty().text(s.count),e.parent().addClass("green-border")):(e.addClass("transparent").find(".pr-count").empty(),e.parent().removeClass("green-border"))),s.count>0?n.fadeIn(200):n.fadeOut(200),s.oldPrice*s.count>0?(a.empty().text(s.oldPrice*s.count),i.css("display","inline")):(a.empty(),i.css("display","none")),$(s.signal).trigger("click")},this.construct(t)},Cart=function(t){var o={discount:0,productsForDiscount:0},c=0,e=0,n=[],a=0,i=0,r=$(".screen-cart"),s=$(".total-price .total"),l=$(".total-price .old"),d=$("#total-form"),u=this;this.construct=function(t){$.extend(o,t),$(".notify-cart").on("click",function(){u.updateCartTotal()})},this.updateCartTotal=function(){for(var t=0,u=0,p=0,f=n[0].getTotal(),m=0;m<a;m++)t+=n[m].getTotal(),u+=n[m].getCount(),p+=n[m].getTotaOld();c=u;var y=parseInt(c/o.productsForDiscount);e=t-(i=y*o.discount),0!=p?p+=+f:p=t,c>0?(r.fadeIn(200),s.empty().text(e),l.empty().text(p),d.val(e),$(".cart-action").addClass("flexbox").find(".cart-num").empty().text(c),$("#ttl").val(e)):(r.fadeOut(200),s.empty().text(e),l.empty().text(p),$(".cart-action").removeClass("flexbox")),p<=e?l.parent().css("display","none"):l.parent().css("display","inline")},this.addProduct=function(t){n[a]=t,a+=1},this.clearAll=function(){for(var t=0;t<a;t++)n[t].getCount()>0&&n[t].clearCount()},this.construct(t)};$(document).ready(function(){$("#close-good-modal, .to-main").on("click",function(t){return t.preventDefault(),$("#good-modal").animate({opacity:0},250),setTimeout(function(){$("#good-modal").css("display","none")},250),!1})});